import{r,R as x,a as X}from"./index.l2PZgWEW.js";import{j as E}from"./utils.CeO8X3KE.js";import{u as w,S as O}from"./button.B069mYr4.js";import{r as G}from"./index.DY16rmGi.js";function h(e,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(e?.(u),n===!1||!u.defaultPrevented)return t?.(u)}}function k(e,t=[]){let n=[];function o(i,l){const f=r.createContext(l),a=n.length;n=[...n,l];function s(d){const{scope:I,children:m,...c}=d,v=I?.[e][a]||f,g=r.useMemo(()=>c,Object.values(c));return E.jsx(v.Provider,{value:g,children:m})}function C(d,I){const m=I?.[e][a]||f,c=r.useContext(m);if(c)return c;if(l!==void 0)return l;throw new Error(`\`${d}\` must be used within \`${i}\``)}return s.displayName=i+"Provider",[s,C]}const u=()=>{const i=n.map(l=>r.createContext(l));return function(f){const a=f?.[e]||i;return r.useMemo(()=>({[`__scope${e}`]:{...f,[e]:a}}),[f,a])}};return u.scopeName=e,[o,Z(u,...t)]}function Z(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(i){const l=o.reduce((f,{useScope:a,scopeName:s})=>{const d=a(i)[`__scope${s}`];return{...f,...d}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function ee(e){const t=e+"CollectionProvider",[n,o]=k(t),[u,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:c,children:v}=m,g=x.useRef(null),p=x.useRef(new Map).current;return E.jsx(u,{scope:c,itemMap:p,collectionRef:g,children:v})};l.displayName=t;const f=e+"CollectionSlot",a=x.forwardRef((m,c)=>{const{scope:v,children:g}=m,p=i(f,v),R=w(c,p.collectionRef);return E.jsx(O,{ref:R,children:g})});a.displayName=f;const s=e+"CollectionItemSlot",C="data-radix-collection-item",d=x.forwardRef((m,c)=>{const{scope:v,children:g,...p}=m,R=x.useRef(null),b=w(c,R),A=i(s,v);return x.useEffect(()=>(A.itemMap.set(R,{ref:R,...p}),()=>void A.itemMap.delete(R))),E.jsx(O,{[C]:"",ref:b,children:g})});d.displayName=s;function I(m){const c=i(e+"CollectionConsumer",m);return x.useCallback(()=>{const g=c.collectionRef.current;if(!g)return[];const p=Array.from(g.querySelectorAll(`[${C}]`));return Array.from(c.itemMap.values()).sort((A,T)=>p.indexOf(A.ref.current)-p.indexOf(T.ref.current))},[c.collectionRef,c.itemMap])}return[{Provider:l,Slot:a,ItemSlot:d},I,o]}var _=globalThis?.document?r.useLayoutEffect:()=>{},te=X.useId||(()=>{}),ne=0;function oe(e){const[t,n]=r.useState(te());return _(()=>{e||n(o=>o??String(ne++))},[e]),e||(t?`radix-${t}`:"")}var re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],K=re.reduce((e,t)=>{const n=r.forwardRef((o,u)=>{const{asChild:i,...l}=o,f=i?O:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...l,ref:u})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ye(e,t){e&&G.flushSync(()=>e.dispatchEvent(t))}function U(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...n)=>t.current?.(...n),[])}function se({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,u]=ce({defaultProp:t,onChange:n}),i=e!==void 0,l=i?e:o,f=U(n),a=r.useCallback(s=>{if(i){const d=typeof s=="function"?s(e):s;d!==e&&f(d)}else u(s)},[i,e,u,f]);return[l,a]}function ce({defaultProp:e,onChange:t}){const n=r.useState(e),[o]=n,u=r.useRef(o),i=U(t);return r.useEffect(()=>{u.current!==o&&(i(o),u.current=o)},[o,u,i]),n}var ue=r.createContext(void 0);function ie(e){const t=r.useContext(ue);return e||t||"ltr"}var F="rovingFocusGroup.onEntryFocus",ae={bubbles:!1,cancelable:!0},P="RovingFocusGroup",[D,$,le]=ee(P),[fe,we]=k(P,[le]),[de,me]=fe(P),B=r.forwardRef((e,t)=>E.jsx(D.Provider,{scope:e.__scopeRovingFocusGroup,children:E.jsx(D.Slot,{scope:e.__scopeRovingFocusGroup,children:E.jsx(pe,{...e,ref:t})})}));B.displayName=P;var pe=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:u=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:a,onEntryFocus:s,preventScrollOnEntryFocus:C=!1,...d}=e,I=r.useRef(null),m=w(t,I),c=ie(i),[v=null,g]=se({prop:l,defaultProp:f,onChange:a}),[p,R]=r.useState(!1),b=U(s),A=$(n),T=r.useRef(!1),[V,L]=r.useState(0);return r.useEffect(()=>{const S=I.current;if(S)return S.addEventListener(F,b),()=>S.removeEventListener(F,b)},[b]),E.jsx(de,{scope:n,orientation:o,dir:c,loop:u,currentTabStopId:v,onItemFocus:r.useCallback(S=>g(S),[g]),onItemShiftTab:r.useCallback(()=>R(!0),[]),onFocusableItemAdd:r.useCallback(()=>L(S=>S+1),[]),onFocusableItemRemove:r.useCallback(()=>L(S=>S-1),[]),children:E.jsx(K.div,{tabIndex:p||V===0?-1:0,"data-orientation":o,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:h(e.onMouseDown,()=>{T.current=!0}),onFocus:h(e.onFocus,S=>{const q=!T.current;if(S.target===S.currentTarget&&q&&!p){const j=new CustomEvent(F,ae);if(S.currentTarget.dispatchEvent(j),!j.defaultPrevented){const M=A().filter(N=>N.focusable),z=M.find(N=>N.active),J=M.find(N=>N.id===v),Q=[z,J,...M].filter(Boolean).map(N=>N.ref.current);Y(Q,C)}}T.current=!1}),onBlur:h(e.onBlur,()=>R(!1))})})}),W="RovingFocusGroupItem",H=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:u=!1,tabStopId:i,...l}=e,f=oe(),a=i||f,s=me(W,n),C=s.currentTabStopId===a,d=$(n),{onFocusableItemAdd:I,onFocusableItemRemove:m}=s;return r.useEffect(()=>{if(o)return I(),()=>m()},[o,I,m]),E.jsx(D.ItemSlot,{scope:n,id:a,focusable:o,active:u,children:E.jsx(K.span,{tabIndex:C?0:-1,"data-orientation":s.orientation,...l,ref:t,onMouseDown:h(e.onMouseDown,c=>{o?s.onItemFocus(a):c.preventDefault()}),onFocus:h(e.onFocus,()=>s.onItemFocus(a)),onKeyDown:h(e.onKeyDown,c=>{if(c.key==="Tab"&&c.shiftKey){s.onItemShiftTab();return}if(c.target!==c.currentTarget)return;const v=Ce(c,s.orientation,s.dir);if(v!==void 0){if(c.metaKey||c.ctrlKey||c.altKey||c.shiftKey)return;c.preventDefault();let p=d().filter(R=>R.focusable).map(R=>R.ref.current);if(v==="last")p.reverse();else if(v==="prev"||v==="next"){v==="prev"&&p.reverse();const R=p.indexOf(c.currentTarget);p=s.loop?Ie(p,R+1):p.slice(R+1)}setTimeout(()=>Y(p))}})})})});H.displayName=W;var ve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Re(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ce(e,t,n){const o=Re(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ve[o]}function Y(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function Ie(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var Pe=B,Me=H;function ge(e,t){return r.useReducer((n,o)=>t[n][o]??n,e)}var Se=e=>{const{present:t,children:n}=e,o=Ee(t),u=typeof n=="function"?n({present:o.isPresent}):r.Children.only(n),i=w(o.ref,Ne(u));return typeof n=="function"||o.isPresent?r.cloneElement(u,{ref:i}):null};Se.displayName="Presence";function Ee(e){const[t,n]=r.useState(),o=r.useRef({}),u=r.useRef(e),i=r.useRef("none"),l=e?"mounted":"unmounted",[f,a]=ge(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const s=y(o.current);i.current=f==="mounted"?s:"none"},[f]),_(()=>{const s=o.current,C=u.current;if(C!==e){const I=i.current,m=y(s);e?a("MOUNT"):m==="none"||s?.display==="none"?a("UNMOUNT"):a(C&&I!==m?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,a]),_(()=>{if(t){const s=d=>{const m=y(o.current).includes(d.animationName);d.target===t&&m&&G.flushSync(()=>a("ANIMATION_END"))},C=d=>{d.target===t&&(i.current=y(o.current))};return t.addEventListener("animationstart",C),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{t.removeEventListener("animationstart",C),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:r.useCallback(s=>{s&&(o.current=getComputedStyle(s)),n(s)},[])}}function y(e){return e?.animationName||"none"}function Ne(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}export{Me as I,K as P,Pe as R,we as a,se as b,k as c,oe as d,h as e,Se as f,U as g,ye as h,_ as i,ee as j,ie as u};
